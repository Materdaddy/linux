From b7e6533c988b1bb6b6892f6bd73306a15283247b Mon Sep 17 00:00:00 2001
From: Richard Zhao <b20223@freescale.com>
Date: Thu, 5 Mar 2009 17:43:11 +0800
Subject: [PATCH] ENGR00108905 sgtl5000: remove unneeded check of spk_amp_event

Remove unneeded check to make it more portable.

Signed-off-by: Richard Zhao <b20223@freescale.com>
---
 sound/soc/imx/imx-3stack-sgtl5000.c |   20 +++++---------------
 1 files changed, 5 insertions(+), 15 deletions(-)

diff --git a/sound/soc/imx/imx-3stack-sgtl5000.c b/sound/soc/imx/imx-3stack-sgtl5000.c
index a062553..58fae69 100644
--- a/sound/soc/imx/imx-3stack-sgtl5000.c
+++ b/sound/soc/imx/imx-3stack-sgtl5000.c
@@ -314,28 +314,18 @@ static int sgtl5000_set_spk(struct snd_kcontrol *kcontrol,
 static int spk_amp_event(struct snd_soc_dapm_widget *w,
 			 struct snd_kcontrol *kcontrol, int event)
 {
-	int hp_status;
 	struct imx_3stack_priv *priv = &machine_priv;
 	struct platform_device *pdev = priv->pdev;
 	struct mxc_audio_platform_data *plat = pdev->dev.platform_data;
 
-	if ((plat->amp_enable == NULL) || (priv->reg_vdda == NULL))
+	if (plat->amp_enable == NULL)
 		return 0;
 
-	hp_status = plat->hp_status();
-	if (SND_SOC_DAPM_EVENT_ON(event)) {
-		if (hp_status) {
-			plat->amp_enable(0);
-			regulator_set_mode(priv->reg_vdda,
-					   REGULATOR_MODE_NORMAL);
-		} else {
-			plat->amp_enable(1);
-			regulator_set_mode(priv->reg_vdda, REGULATOR_MODE_FAST);
-		}
-	} else {
+	if (SND_SOC_DAPM_EVENT_ON(event))
+		plat->amp_enable(1);
+	else
 		plat->amp_enable(0);
-		regulator_set_mode(priv->reg_vdda, REGULATOR_MODE_NORMAL);
-	}
+
 	return 0;
 }
 
-- 
1.5.4.4

