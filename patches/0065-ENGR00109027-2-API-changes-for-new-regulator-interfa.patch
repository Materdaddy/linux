From 554dd48d145fd65878f5d820a64eb023e3634db8 Mon Sep 17 00:00:00 2001
From: Ann Thornton <Ann.Thornton@freescale.com>
Date: Tue, 10 Mar 2009 10:30:10 -0500
Subject: [PATCH] ENGR00109027-2 API changes for new regulator interface.

2 more changes needed for the new regulator interface.

Signed-off-by: Ann Thornton <Ann.Thornton@freescale.com>
---
 drivers/char/mxc_si4702.c             |   10 +++++-----
 drivers/mxc/pmic/core/pmic_core_i2c.c |    2 +-
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/char/mxc_si4702.c b/drivers/char/mxc_si4702.c
index 5fcc1a4..b6f5782 100644
--- a/drivers/char/mxc_si4702.c
+++ b/drivers/char/mxc_si4702.c
@@ -1114,7 +1114,7 @@ static int __devinit si4702_probe(struct i2c_client *client,
 		goto char_dev_remove;
 	}
 
-	dev = device_create(drv_data->radio_class, NULL,
+	dev = device_create(drv_data->radio_class, NULL, NULL,
 			    MKDEV(drv_data->major, drv_data->minor), "si4702");
 	if (IS_ERR(dev)) {
 		dev_err(&client->dev,
@@ -1141,12 +1141,12 @@ gpio_put:
 disable_vdd:
 	if (plat_data->reg_vdd) {
 		regulator_disable(drv_data->vdd);
-		regulator_put(drv_data->vdd, &client->dev);
+		regulator_put(drv_data->vdd);
 	}
 disable_vio:
 	if (plat_data->reg_vio) {
 		regulator_disable(drv_data->vio);
-		regulator_put(drv_data->vio, &client->dev);
+		regulator_put(drv_data->vio);
 	}
 
 free_drv_data:
@@ -1170,10 +1170,10 @@ static int __devexit si4702_remove(struct i2c_client *client)
 	si4702_gpio_put();
 
 	if (plat_data->reg_vdd)
-		regulator_put(drv_data->vdd, &client->dev);
+		regulator_put(drv_data->vdd);
 
 	if (plat_data->reg_vio)
-		regulator_put(drv_data->vio, &client->dev);
+		regulator_put(drv_data->vio);
 
 	kfree(si4702_drvdata);
 	si4702_drvdata = NULL;
diff --git a/drivers/mxc/pmic/core/pmic_core_i2c.c b/drivers/mxc/pmic/core/pmic_core_i2c.c
index 750cf49..6e1d2d4 100644
--- a/drivers/mxc/pmic/core/pmic_core_i2c.c
+++ b/drivers/mxc/pmic/core/pmic_core_i2c.c
@@ -274,7 +274,7 @@ static int __devinit pmic_probe(struct i2c_client *client,
 
 static int pmic_remove(struct i2c_client *client)
 {
-	int pmic_irq = (int)(client->dev.platform_data);
+	int pmic_irq = (int)(client->irq);
 
 	if (pmic_event_wq)
 		destroy_workqueue(pmic_event_wq);
-- 
1.5.4.4

